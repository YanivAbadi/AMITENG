<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>משחק לימוד אנגלית</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 10px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
        }

        .game-container {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            margin: auto 10px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .progress {
            height: 6px;
            background: #eee;
            border-radius: 3px;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 100%;
            background: #4CAF50;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .word-display {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.5rem;
            min-height: 80px;
        }

        .speaker-icon {
            cursor: pointer;
            width: 24px;
            height: 24px;
            padding: 5px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: #2196F3;
            color: white;
            font-size: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option-btn:active {
            transform: scale(0.98);
        }

        .correct {
            background: #4CAF50 !important;
        }

        .incorrect {
            background: #f44336 !important;
        }

        .score {
            color: #333;
            font-weight: 500;
        }

        @media (max-height: 700px) {
            .game-container {
                padding: 10px;
            }
            
            .word-display {
                padding: 15px;
                margin-bottom: 15px;
                min-height: 60px;
            }

            .option-btn {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <span class="score">ניקוד: <span id="score">0</span></span>
            <span id="progress-text">1/93</span>
        </div>
        
        <div class="progress">
            <div class="progress-bar" id="progress"></div>
        </div>

        <div class="word-display" id="word-container">
            <span id="current-word"></span>
            <svg class="speaker-icon" viewBox="0 0 24 24" onclick="speakWord()">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
            </svg>
        </div>

        <div class="options-grid" id="options"></div>
    </div>

    <script>
        const words = [
            {english: "ancient", hebrew: "עתיק"},
            {english: "article", hebrew: "מאמר"},
            {english: "as if", hebrew: "כאילו ש-"},
            {english: "attach", hebrew: "לחבר, לצרף"},
            {english: "attempt", hebrew: "לנסות"},
            {english: "based on", hebrew: "מבוסס על"},
            {english: "borrow", hebrew: "לקחת בהשאלה"},
            {english: "bring luck", hebrew: "להביא למישהו מזל"},
            {english: "care", hebrew: "להיות איכפת"},
            {english: "colleague", hebrew: "קולגה, עמית"},
            {english: "consider", hebrew: "להחשיב את ... כ-"},
            {english: "contrast", hebrew: "הבדל, למצוא את ההבדל"},
            {english: "cut", hebrew: "חתך/שריטה, לחתוך"},
            {english: "defend", hebrew: "להגן"},
            {english: "deny", hebrew: "להכחיש"},
            {english: "dive", hebrew: "לצלול"},
            {english: "duty", hebrew: "תפקיד, חובה"},
            {english: "elementary", hebrew: "יסודי, בסיסי"},
            {english: "elevator", hebrew: "מעלית"},
            {english: "every single", hebrew: "כל אחד ואחד"},
            // ... [כל המילים הנוספות]
        ];

        let gameWords = [...words];
        let currentWordIndex = 0;
        let score = 0;
        let currentWord = null;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ערבוב המילים בתחילת המשחק
        gameWords = shuffleArray(gameWords);

        function speakWord() {
            if (!currentWord) return;
            const utterance = new SpeechSynthesisUtterance(currentWord.english);
            utterance.lang = 'en-US';
            utterance.rate = 0.8;
            speechSynthesis.cancel();
            speechSynthesis.speak(utterance);
        }

        function getRandomOptions(correctAnswer) {
            const otherWords = words.filter(word => word.hebrew !== correctAnswer);
            const randomOptions = shuffleArray([...otherWords]).slice(0, 4);
            const allOptions = [...randomOptions, {hebrew: correctAnswer}];
            return shuffleArray(allOptions);
        }

        function updateProgress() {
            const progress = ((currentWordIndex) / gameWords.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = 
                `${currentWordIndex}/${gameWords.length}`;
        }

        function handleAnswer(isCorrect, button) {
            if (isCorrect) {
                button.classList.add('correct');
                score++;
                document.getElementById('score').textContent = score;
                setTimeout(nextWord, 500);
            } else {
                button.classList.add('incorrect');
                const correctButton = Array.from(document.querySelectorAll('.option-btn'))
                    .find(btn => btn.dataset.correct === 'true');
                correctButton.classList.add('correct');
                setTimeout(nextWord, 1500);
            }
        }

        function nextWord() {
            if (currentWordIndex >= gameWords.length) {
                const percentage = Math.round((score / gameWords.length) * 100);
                alert(`סיימת את המשחק!\nהניקוד שלך: ${score} מתוך ${gameWords.length}\nאחוז הצלחה: ${percentage}%`);
                return;
            }

            currentWord = gameWords[currentWordIndex];
            document.getElementById('current-word').textContent = currentWord.english;
            
            const options = getRandomOptions(currentWord.hebrew);
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';

            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option.hebrew;
                button.dataset.correct = (option.hebrew === currentWord.hebrew).toString();
                button.onclick = (e) => {
                    const isCorrect = option.hebrew === currentWord.hebrew;
                    handleAnswer(isCorrect, e.target);
                };
                optionsContainer.appendChild(button);
            });

            updateProgress();
            speakWord();
            currentWordIndex++;
        }

        // מניעת זום בהקשה כפולה
        document.addEventListener('dblclick', (e) => e.preventDefault());
        document.getElementById('word-container').onclick = speakWord;

        // התחלת המשחק
        nextWord();
    </script>
</body>
</html>
